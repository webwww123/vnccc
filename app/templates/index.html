<!doctype html>
<html>
<head>
  <title>Desktops</title>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script>
    const socket = io();
    socket.on('chat', msg => {
      const div = document.createElement('div');
      div.textContent = msg;
      document.getElementById('chat').appendChild(div);
    });
    function send(){
      const val = document.getElementById('msg').value;
      socket.emit('chat', val);
      document.getElementById('msg').value='';
    }
  </script>
</head>
<body>
<div id="chat"></div>
<input id="msg"><button onclick="send()">Send</button>
<hr>
<div style="display:flex; flex-wrap:wrap;">
{% for s in sessions %}
  <iframe src="http://localhost:{{s.port}}/vnc.html?view_only={{ 'true' if s.user_id != self_id else 'false' }}" width="320" height="240"></iframe>
{% endfor %}
</div>
<a href="{{ url_for('logout') }}">Logout</a>
</body>
</html>
